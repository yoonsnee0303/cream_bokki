<!DOCTYPE html>
<html>

<head>
  <title>Visitor Counter</title>
  <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"></script>
</head>

<body>
  <h1>Welcome to my website!</h1>

  <!-- Add separate visitor counts for each element in the array -->
  <p>You are visitor number for /ds: <span id="visitor-count-ds"></span></p>
  <p>You are visitor number for /df: <span id="visitor-count-df"></span></p>
  <p>You are visitor number for 100: <span id="visitor-count-100"></span></p>

  <script>
    //if 첫번째 방문 시__코드 필요

    var firebaseConfig = {
      apiKey: "AIzaSyBGYRCvBCcpoTbqV-47pW_8mMNOZzIs1jQ",
      authDomain: "traffic-5a329.firebaseapp.com",
      databaseURL: "https://traffic-5a329-default-rtdb.firebaseio.com",
      projectId: "traffic-5a329",
      storageBucket: "traffic-5a329.appspot.com",
      messagingSenderId: "979753452151",
      appId: "1:979753452151:web:1647c7b0027c2f6562fc72",
      measurementId: "G-0NJ8XPKD56"
    };

    firebase.initializeApp(firebaseConfig);
    var database = firebase.database();

    // Create separate visitor count references for each element in the array
    var visitorRefDs = database.ref('visitor_count_ds');
    var visitorRefDf = database.ref('visitor_count_df');
    var visitorRef100 = database.ref('visitor_count_100');

    var currentUrl = window.location.href;

    var urlsToCheck = ['/ds', '/df', '100'];

    // Loop through the array and increment the visitor count for each element
    for (var i = 0; i < urlsToCheck.length; i++) {
      if (currentUrl.includes(urlsToCheck[i])) {
        switch (urlsToCheck[i]) {
          case '/ds':
            visitorRefDs.transaction(function (count) {
              return count + 1;
            });
            break;
          case '/df':
            visitorRefDf.transaction(function (count) {
              return count + 1;
            });
            break;
          case '100':
            visitorRef100.transaction(function (count) {
              return count + 1;
            });
            break;
        }
      }
    }

    // Update the visitor count for each element in the array
    visitorRefDs.on('value', function (snapshot) {
      var count = snapshot.val();
      document.getElementById('visitor-count-ds').innerText = count;
    });

    visitorRefDf.on('value', function (snapshot) {
      var count = snapshot.val();
      document.getElementById('visitor-count-df').innerText = count;
    });

    visitorRef100.on('value', function (snapshot) {
      var count = snapshot.val();
      document.getElementById('visitor-count-100').innerText = count;
    });
  </script>
</body>

</html>